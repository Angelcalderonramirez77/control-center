<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro de Reportes - Control Center Pro</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/portal.css">
    <link rel="stylesheet" href="css/reports.css">
</head>
<body>
    <header class="main-header">
        <div class="container header-container">
            <h1>ğŸ“Š Centro de Reportes</h1>
            <nav class="navbar-admin">
                <button id="back-to-admin" class="btn-nav">â† Volver al Panel</button>
                <button id="logout-btn" class="btn-nav btn-logout">ğŸšª Cerrar SesiÃ³n</button>
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- Tabs de Reportes -->
        <div class="reports-tabs">
            <button class="tab-btn active" data-tab="payroll">ğŸ“‹ NÃ³mina</button>
            <button class="tab-btn" data-tab="payments">ğŸ’° Pagos</button>
            <button class="tab-btn" data-tab="audit">ğŸ” AuditorÃ­a</button>
            <button class="tab-btn" data-tab="analytics">ğŸ“ˆ AnÃ¡lisis</button>
            <button class="tab-btn" data-tab="withholdings">ğŸ’¸ Retenciones</button>
        </div>

        <!-- TAB 1: NÃ“MINA -->
        <div id="payroll-tab" class="tab-content active">
            <div class="card">
                <h2>Reportes de NÃ³mina</h2>
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Mes y AÃ±o:</label>
                        <input type="month" id="payroll-month" value="">
                    </div>
                    <div class="filter-group">
                        <label>Empleado (Opcional):</label>
                        <input type="text" id="payroll-employee" placeholder="___-_______-_" maxlength="13">
                    </div>
                </div>
                <div class="button-group">
                    <button id="generate-pdf-btn" class="btn btn-primary">ğŸ“„ Generar PDF</button>
                    <button id="generate-excel-btn" class="btn btn-success">ğŸ“Š Exportar Excel</button>
                    <button id="view-payroll-btn" class="btn">ğŸ‘ï¸ Vista Previa</button>
                </div>
                <div id="payroll-preview" class="preview-section" style="display: none;"></div>
            </div>
        </div>

        <!-- TAB 2: PAGOS -->
        <div id="payments-tab" class="tab-content" style="display: none;">
            <div class="card">
                <h2>Historial de Pagos</h2>
                <div style="background: #e8f4f8; padding: 12px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #2196F3;">
                    <p style="margin: 0; font-size: 13px; color: #1976D2;">
                        <strong>â„¹ï¸ PerÃ­odos de Pago:</strong> En RepÃºblica Dominicana, los salarios se pagan entre el 26 del mes anterior y el 5 del mes actual. 
                        Si ingresÃ³ el dÃ­a 15, su prÃ³ximo pago serÃ¡ el dÃ­a 15 del siguiente mes (cada 30 dÃ­as).
                    </p>
                </div>
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Fecha Desde:</label>
                        <input type="date" id="payments-from-date">
                    </div>
                    <div class="filter-group">
                        <label>Fecha Hasta:</label>
                        <input type="date" id="payments-to-date">
                    </div>
                    <div class="filter-group">
                        <label>Empleado:</label>
                        <input type="text" id="payments-employee" placeholder="___-_______-_" maxlength="13">
                    </div>
                </div>
                <button id="search-payments-btn" class="btn btn-primary">ğŸ” Buscar</button>
                <div id="payments-results" class="results-section"></div>
            </div>
        </div>

        <!-- TAB 3: AUDITORÃA -->
        <div id="audit-tab" class="tab-content" style="display: none;">
            <div class="card">
                <h2>Registro de AuditorÃ­a</h2>
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Tipo de AcciÃ³n:</label>
                        <select id="audit-action">
                            <option value="">Todas</option>
                            <option value="CREATE">Crear</option>
                            <option value="UPDATE">Actualizar</option>
                            <option value="DELETE">Eliminar</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Fecha Desde:</label>
                        <input type="date" id="audit-from-date">
                    </div>
                    <div class="filter-group">
                        <label>Fecha Hasta:</label>
                        <input type="date" id="audit-to-date">
                    </div>
                </div>
                <button id="load-audit-btn" class="btn btn-primary">ğŸ“‹ Cargar</button>
                <div id="audit-results" class="results-section"></div>
            </div>
        </div>

        <!-- TAB 4: ANÃLISIS -->
        <div id="analytics-tab" class="tab-content" style="display: none;">
            <div class="card">
                <h2>AnÃ¡lisis de Crecimiento Salarial</h2>
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Rango de Meses:</label>
                        <input type="month" id="analytics-start-month">
                        <span>hasta</span>
                        <input type="month" id="analytics-end-month">
                    </div>
                </div>
                <button id="load-analytics-btn" class="btn btn-primary">ğŸ“Š Generar AnÃ¡lisis</button>
                <div id="analytics-results" class="results-section"></div>
            </div>

            <div class="card" style="margin-top: 20px;">
                <h2>ProyecciÃ³n de NÃ³mina</h2>
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Proyectar para:</label>
                        <input type="month" id="projection-month">
                    </div>
                </div>
                <button id="project-payroll-btn" class="btn btn-primary">ğŸ”® Proyectar</button>
                <div id="projection-results" class="results-section"></div>
            </div>
        </div>

        <!-- TAB 5: RETENCIONES -->
        <div id="withholdings-tab" class="tab-content" style="display: none;">
            <div class="card">
                <h2>CÃ¡lculo de Retenciones (ISR, AFP, SFS)</h2>
                <div class="filter-section">
                    <div class="filter-group">
                        <label>Empleado:</label>
                        <input type="text" id="withholdings-employee" placeholder="___-_______-_" maxlength="13">
                    </div>
                    <div class="filter-group">
                        <label>Salario:</label>
                        <input type="number" id="withholdings-salary" placeholder="Monto en RD$" min="0" step="0.01">
                    </div>
                </div>
                <button id="calculate-withholdings-btn" class="btn btn-primary">ğŸ’° Calcular</button>
                <div id="withholdings-results" class="results-section"></div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script type="module" src="js/reports.js"></script>
</body>
</html>
